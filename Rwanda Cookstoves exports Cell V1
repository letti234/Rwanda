
//Rwanda shapefile (ADM0)
var studyRegion = ee.FeatureCollection("FAO/GAUL/2015/level0")
.filter(ee.Filter.eq("ADM0_NAME", "Rwanda"));

//Open MODIS data and clip to geometry
var data = ee.ImageCollection('MODIS/006/MOD44B')
.map(function(image){return image.clip(studyRegion)});

print(data, "MODIS image clipped to Rwanda");

//Open cell data
var ADM = ee.FeatureCollection("users/salem043/Rwanda/Cell_LL");

Map.centerObject(ADM, 8);
Map.addLayer(ADM);

//////////////////////////////////////////////////////////////////////////
//
//Forest cover
//
//////////////////////////////////////////////////////////////////////////

//2000
var forest = data.filter(ee.Filter.date('2000-01-01', '2000-12-31'))
.select("Percent_Tree_Cover").toBands();

print(forest, "Forest pre");

forest= forest.select(['2000_03_05_Percent_Tree_Cover'])
  .rename(['for_2000']);

print(forest, "Forest post");

var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean',
    geometry: feature.geometry(),
    scale: 250,
    maxPixels: 1e9
  }));
});




//2001
var forest = data.filter(ee.Filter.date('2001-01-01', '2001-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2001_03_06_Percent_Tree_Cover'])
  .rename(['for_2001']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});



//2002
var forest = data.filter(ee.Filter.date('2002-01-01', '2002-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2002_03_06_Percent_Tree_Cover'])
  .rename(['for_2002']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2003
var forest = data.filter(ee.Filter.date('2003-01-01', '2003-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2003_03_06_Percent_Tree_Cover'])
  .rename(['for_2003']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2004
var forest = data.filter(ee.Filter.date('2004-01-01', '2004-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2004_03_05_Percent_Tree_Cover'])
  .rename(['for_2004']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2005
var forest = data.filter(ee.Filter.date('2005-01-01', '2005-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2005_03_06_Percent_Tree_Cover'])
  .rename(['for_2005']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2006
var forest = data.filter(ee.Filter.date('2006-01-01', '2006-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2006_03_06_Percent_Tree_Cover'])
  .rename(['for_2006']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2007
var forest = data.filter(ee.Filter.date('2007-01-01', '2007-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2007_03_06_Percent_Tree_Cover'])
  .rename(['for_2007']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2008
var forest = data.filter(ee.Filter.date('2008-01-01', '2008-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2008_03_05_Percent_Tree_Cover'])
  .rename(['for_2008']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2009
var forest = data.filter(ee.Filter.date('2009-01-01', '2009-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2009_03_06_Percent_Tree_Cover'])
  .rename(['for_2009']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2010
var forest = data.filter(ee.Filter.date('2010-01-01', '2010-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2010_03_06_Percent_Tree_Cover'])
  .rename(['for_2010']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2011
var forest = data.filter(ee.Filter.date('2011-01-01', '2011-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2011_03_06_Percent_Tree_Cover'])
  .rename(['for_2011']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2012
var forest = data.filter(ee.Filter.date('2012-01-01', '2012-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2012_03_05_Percent_Tree_Cover'])
  .rename(['for_2012']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2013
var forest = data.filter(ee.Filter.date('2013-01-01', '2013-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2013_03_06_Percent_Tree_Cover'])
  .rename(['for_2013']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2014
var forest = data.filter(ee.Filter.date('2014-01-01', '2014-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2014_03_06_Percent_Tree_Cover'])
  .rename(['for_2014']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2015
var forest = data.filter(ee.Filter.date('2015-01-01', '2015-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2015_03_06_Percent_Tree_Cover'])
  .rename(['for_2015']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2016
var forest = data.filter(ee.Filter.date('2016-01-01', '2016-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2016_03_05_Percent_Tree_Cover'])
  .rename(['for_2016']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2017
var forest = data.filter(ee.Filter.date('2017-01-01', '2017-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2017_03_06_Percent_Tree_Cover'])
  .rename(['for_2017']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2018
var forest = data.filter(ee.Filter.date('2018-01-01', '2018-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2018_03_06_Percent_Tree_Cover'])
  .rename(['for_2018']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2019
var forest = data.filter(ee.Filter.date('2019-01-01', '2019-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2019_03_06_Percent_Tree_Cover'])
  .rename(['for_2019']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2020
var forest = data.filter(ee.Filter.date('2020-01-01', '2020-12-31'))
.select("Percent_Tree_Cover").toBands();

forest= forest.select(['2020_03_05_Percent_Tree_Cover'])
  .rename(['for_2020']);
  
var ADM = ADM.map(function(feature) {
  return feature.set(forest.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//////////////////////////////////////////////////////////////////////////
//
//Nontree Vegetative cover
//
//////////////////////////////////////////////////////////////////////////

var veg = data.filter(ee.Filter.date('2000-01-01', '2000-12-31'))
.select("Percent_NonTree_Vegetation").toBands();


veg= veg.select(['2000_03_05_Percent_NonTree_Vegetation'])
.rename(['veg_2000']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean',
    geometry: feature.geometry(),
    scale: 250,
    maxPixels: 1e9
  }));
});




//2001
var veg = data.filter(ee.Filter.date('2001-01-01', '2001-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2001_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2001']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});



//2002
var veg = data.filter(ee.Filter.date('2002-01-01', '2002-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2002_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2002']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2003
var veg = data.filter(ee.Filter.date('2003-01-01', '2003-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2003_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2003']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2004
var veg = data.filter(ee.Filter.date('2004-01-01', '2004-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2004_03_05_Percent_NonTree_Vegetation'])
.rename(['veg_2004']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2005
var veg = data.filter(ee.Filter.date('2005-01-01', '2005-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2005_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2005']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2006
var veg = data.filter(ee.Filter.date('2006-01-01', '2006-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2006_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2006']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2007
var veg = data.filter(ee.Filter.date('2007-01-01', '2007-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2007_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2007']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2008
var veg = data.filter(ee.Filter.date('2008-01-01', '2008-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2008_03_05_Percent_NonTree_Vegetation'])
.rename(['veg_2008']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2009
var veg = data.filter(ee.Filter.date('2009-01-01', '2009-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2009_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2009']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2010
var veg = data.filter(ee.Filter.date('2010-01-01', '2010-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2010_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2010']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2011
var veg = data.filter(ee.Filter.date('2011-01-01', '2011-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2011_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2011']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2012
var veg = data.filter(ee.Filter.date('2012-01-01', '2012-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2012_03_05_Percent_NonTree_Vegetation'])
.rename(['veg_2012']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2013
var veg = data.filter(ee.Filter.date('2013-01-01', '2013-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2013_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2013']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2014
var veg = data.filter(ee.Filter.date('2014-01-01', '2014-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2014_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2014']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//2015
var veg = data.filter(ee.Filter.date('2015-01-01', '2015-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2015_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2015']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2016
var veg = data.filter(ee.Filter.date('2016-01-01', '2016-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2016_03_05_Percent_NonTree_Vegetation'])
.rename(['veg_2016']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2017
var veg = data.filter(ee.Filter.date('2017-01-01', '2017-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2017_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2017']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2018
var veg = data.filter(ee.Filter.date('2018-01-01', '2018-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2018_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2018']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2019
var veg = data.filter(ee.Filter.date('2019-01-01', '2019-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2019_03_06_Percent_NonTree_Vegetation'])
.rename(['veg_2019']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});

//2020
var veg = data.filter(ee.Filter.date('2020-01-01', '2020-12-31'))
.select("Percent_NonTree_Vegetation").toBands();

veg= veg.select(['2020_03_05_Percent_NonTree_Vegetation'])
.rename(['veg_2020']);

var ADM = ADM.map(function(feature) {
  return feature.set(veg.reduceRegion({
    reducer: 'mean', geometry: feature.geometry(), scale: 250,
    maxPixels: 1e9
  }));
});


//////////////////////////////////////////////////////////////////////////
  //
  //NonVegetative Cover
//
  //////////////////////////////////////////////////////////////////////////
  
  var veg = data.filter(ee.Filter.date('2000-01-01', '2000-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  
  veg= veg.select(['2000_03_05_Percent_NonVegetated'])
  .rename(['nonveg_2000']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean',
      geometry: feature.geometry(),
      scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  
  
  //2001
  var veg = data.filter(ee.Filter.date('2001-01-01', '2001-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2001_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2001']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  
  //2002
  var veg = data.filter(ee.Filter.date('2002-01-01', '2002-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2002_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2002']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  //2003
  var veg = data.filter(ee.Filter.date('2003-01-01', '2003-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2003_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2003']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  //2004
  var veg = data.filter(ee.Filter.date('2004-01-01', '2004-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2004_03_05_Percent_NonVegetated'])
  .rename(['nonveg_2004']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  //2005
  var veg = data.filter(ee.Filter.date('2005-01-01', '2005-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2005_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2005']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  //2006
  var veg = data.filter(ee.Filter.date('2006-01-01', '2006-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2006_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2006']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2007
  var veg = data.filter(ee.Filter.date('2007-01-01', '2007-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2007_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2007']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  //2008
  var veg = data.filter(ee.Filter.date('2008-01-01', '2008-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2008_03_05_Percent_NonVegetated'])
  .rename(['nonveg_2008']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2009
  var veg = data.filter(ee.Filter.date('2009-01-01', '2009-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2009_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2009']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  //2010
  var veg = data.filter(ee.Filter.date('2010-01-01', '2010-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2010_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2010']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2011
  var veg = data.filter(ee.Filter.date('2011-01-01', '2011-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2011_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2011']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2012
  var veg = data.filter(ee.Filter.date('2012-01-01', '2012-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2012_03_05_Percent_NonVegetated'])
  .rename(['nonveg_2012']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2013
  var veg = data.filter(ee.Filter.date('2013-01-01', '2013-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2013_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2013']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2014
  var veg = data.filter(ee.Filter.date('2014-01-01', '2014-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2014_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2014']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  //2015
  var veg = data.filter(ee.Filter.date('2015-01-01', '2015-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2015_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2015']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2016
  var veg = data.filter(ee.Filter.date('2016-01-01', '2016-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2016_03_05_Percent_NonVegetated'])
  .rename(['nonveg_2016']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2017
  var veg = data.filter(ee.Filter.date('2017-01-01', '2017-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2017_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2017']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2018
  var veg = data.filter(ee.Filter.date('2018-01-01', '2018-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2018_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2018']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2019
  var veg = data.filter(ee.Filter.date('2019-01-01', '2019-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2019_03_06_Percent_NonVegetated'])
  .rename(['nonveg_2019']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  //2020
  var veg = data.filter(ee.Filter.date('2020-01-01', '2020-12-31'))
  .select("Percent_NonVegetated").toBands();
  
  veg= veg.select(['2020_03_05_Percent_NonVegetated'])
  .rename(['nonveg_2020']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(veg.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
//////////////////////////////////////////////////////////////////////////
  //
  //Quality - prop. cells with "bad" quality (2+ bits)
//
  //////////////////////////////////////////////////////////////////////////
  
//Function for bitwise extraction
var bitwiseExtract = function(input, fromBit, toBit) {
  var maskSize = ee.Number(1).add(toBit).subtract(fromBit);
  var mask = ee.Number(1).leftShift(maskSize).subtract(1);
  return input.rightShift(fromBit).bitwiseAnd(mask);
};

///2000
var qual = data.filter(ee.Filter.date('2000-01-01', '2000-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2000_03_05_Quality'])
  .rename(['qual_2000']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  

///2001
var qual = data.filter(ee.Filter.date('2001-01-01', '2001-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);


qualMask= qualMask.select(['2001_03_06_Quality'])
  .rename(['qual_2001']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  

///2002
var qual = data.filter(ee.Filter.date('2002-01-01', '2002-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2002_03_06_Quality'])
  .rename(['qual_2002']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2003
var qual = data.filter(ee.Filter.date('2003-01-01', '2003-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);


qualMask= qualMask.select(['2003_03_06_Quality'])
  .rename(['qual_2003']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  

///2004
var qual = data.filter(ee.Filter.date('2004-01-01', '2004-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2004_03_05_Quality'])
  .rename(['qual_2004']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });


///2005
var qual = data.filter(ee.Filter.date('2005-01-01', '2005-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2005_03_06_Quality'])
  .rename(['qual_2005']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2006
var qual = data.filter(ee.Filter.date('2006-01-01', '2006-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2006_03_06_Quality'])
  .rename(['qual_2006']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2007
var qual = data.filter(ee.Filter.date('2007-01-01', '2007-12-31'))
  .select("Quality").toBands();


//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2007_03_06_Quality'])
  .rename(['qual_2007']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2008
var qual = data.filter(ee.Filter.date('2008-01-01', '2008-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2008_03_05_Quality'])
  .rename(['qual_2008']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2009
var qual = data.filter(ee.Filter.date('2009-01-01', '2009-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2009_03_06_Quality'])
  .rename(['qual_2009']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2010
var qual = data.filter(ee.Filter.date('2010-01-01', '2010-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2010_03_06_Quality'])
  .rename(['qual_2010']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2011
var qual = data.filter(ee.Filter.date('2011-01-01', '2011-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2011_03_06_Quality'])
  .rename(['qual_2011']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2012
var qual = data.filter(ee.Filter.date('2012-01-01', '2012-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2012_03_05_Quality'])
  .rename(['qual_2012']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });

///2013
var qual = data.filter(ee.Filter.date('2013-01-01', '2013-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2013_03_06_Quality'])
  .rename(['qual_2013']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2014
var qual = data.filter(ee.Filter.date('2014-01-01', '2014-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2014_03_06_Quality'])
  .rename(['qual_2014']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });

///2015
var qual = data.filter(ee.Filter.date('2015-01-01', '2015-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2015_03_06_Quality'])
  .rename(['qual_2015']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });

///2016
var qual = data.filter(ee.Filter.date('2016-01-01', '2016-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2016_03_05_Quality'])
  .rename(['qual_2016']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2017
var qual = data.filter(ee.Filter.date('2017-01-01', '2017-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2017_03_06_Quality'])
  .rename(['qual_2017']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
///2018
var qual = data.filter(ee.Filter.date('2018-01-01', '2018-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2018_03_06_Quality'])
  .rename(['qual_2018']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
///2019
var qual = data.filter(ee.Filter.date('2019-01-01', '2019-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2019_03_06_Quality'])
  .rename(['qual_2019']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });


///2020
var qual = data.filter(ee.Filter.date('2020-01-01', '2020-12-31'))
  .select("Quality").toBands();

//Classifies quality as "bad" when bit count >1
var qualMask = bitwiseExtract(qual, 0, 7).lte(1);

qualMask= qualMask.select(['2020_03_05_Quality'])
  .rename(['qual_2020']);
  
  var ADM = ADM.map(function(feature) {
    return feature.set(qualMask.reduceRegion({
      reducer: 'mean', geometry: feature.geometry(), scale: 250,
      maxPixels: 1e9
    }));
  });
  
  
  print(ADM.limit(5));
  
  // Export.table.toDrive(ADM, "MODIS_cell", "Cookstove_exports");


//////////////////////////////////////////////////////////////
//
// World Pop
//
//////////////////////////////////////////////////////////////


//Open WorldPop data and clip to geometry
var data = ee.ImageCollection('WorldPop/GP/100m/pop')
.filter(ee.Filter.eq('country', 'RWA'));

print(data);

//Zonal stats

  //2000
  
  //Filter to 2000 only, transform into one band
  var pop = data.filter(ee.Filter.eq("year", 2000))
  .select("population").toBands();

  //Rename the variable for easier future use
  pop= pop.select(['RWA_2000_population'])
  .rename(['pop_2000']);
  
  //Reducer - summative for each cell
  var ADM = ADM.map(function(feature) {
    return feature.set(pop.reduceRegion({
      reducer: 'sum', geometry: feature.geometry(), scale: 100,
      maxPixels: 1e9
    }));
  });
  
  
  
  //2001
  
  //Filter to 2001 only, transform into one band
  var pop = data.filter(ee.Filter.eq("year", 2001))
  .select("population").toBands();

  //Rename the variable for easier future use
  pop= pop.select(['RWA_2001_population'])
  .rename(['pop_2001']);
  
  //Reducer - summative for each cell
  var ADM = ADM.map(function(feature) {
    return feature.set(pop.reduceRegion({
      reducer: 'sum', geometry: feature.geometry(), scale: 100,
      maxPixels: 1e9
    }));
  });


  //2002

    //Filter to 2002 only, transform into one band
    var pop = data.filter(ee.Filter.eq("year", 2002))
    .select("population").toBands();

    //Rename the variable for easier future use
    pop= pop.select(['RWA_2002_population'])
    .rename(['pop_2002']);

    //Reducer - summative for each cell
    var ADM = ADM.map(function(feature) {
      return feature.set(pop.reduceRegion({
        reducer: 'sum', geometry: feature.geometry(), scale: 100,
         maxPixels: 1e9
    }));
    });


    //2003

//Filter to 2003 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2003))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2003_population'])
.rename(['pop_2003']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2004

//Filter to 2004 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2004))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2004_population'])
.rename(['pop_2004']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2005

//Filter to 2005 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2005))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2005_population'])
.rename(['pop_2005']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});




//2006

//Filter to 2006 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2006))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2006_population'])
.rename(['pop_2006']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2007

//Filter to 2007 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2007))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2007_population'])
.rename(['pop_2007']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});




//2008

//Filter to 2008 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2008))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2008_population'])
.rename(['pop_2008']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2009

//Filter to 2009 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2009))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2009_population'])
.rename(['pop_2009']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});


//2010

//Filter to 2010 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2010))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2010_population'])
.rename(['pop_2010']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});


//2011

//Filter to 2011 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2011))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2011_population'])
.rename(['pop_2011']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2012

//Filter to 2012 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2012))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2012_population'])
.rename(['pop_2012']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2013

//Filter to 2013 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2013))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2013_population'])
.rename(['pop_2013']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2014

//Filter to 2014 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2014))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2014_population'])
.rename(['pop_2014']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2015

//Filter to 2015 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2015))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2015_population'])
.rename(['pop_2015']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2016

//Filter to 2016 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2016))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2016_population'])
.rename(['pop_2016']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});


//2017

//Filter to 2017 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2017))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2017_population'])
.rename(['pop_2017']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2018

//Filter to 2018 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2018))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2018_population'])
.rename(['pop_2018']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2019

//Filter to 2019 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2019))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2019_population'])
.rename(['pop_2019']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});



//2020

//Filter to 2020 only, transform into one band
var pop = data.filter(ee.Filter.eq("year", 2020))
.select("population").toBands();

//Rename the variable for easier future use
pop= pop.select(['RWA_2020_population'])
.rename(['pop_2020']);

//Reducer - summative for each cell
var ADM = ADM.map(function(feature) {
  return feature.set(pop.reduceRegion({
    reducer: 'sum', geometry: feature.geometry(), scale: 100,
    maxPixels: 1e9
  }));
});

print(ADM.limit(2));



